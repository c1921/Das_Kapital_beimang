# 制作流程

1. OCR
2. 标题分级
3. 统一所有括号为中文括号
4. 将脚注序号的中文括号替换为英文括号
   1. 使用正则表达式`（([0-9a-z?]*)）`查找
   2. 替换为`($1)`
5. 更正标题序号括号
   1. 使用正则表达式`>\(([0-9a-z?]*)\)`查找
   2. 替换为`>（$1）`
6. 整理文本，分离正文与脚注
7. 在正文为脚注序号添加标签
   1. 使用正则表达式`(\([0-9a-z?]*\)|①|②|③|④|⑤)`查找
   2. 替换为`<sup class="a-footnote"><a href="#b-footnote-$1" name="a-footnote-$1">$1</a></sup>`
8. 在脚注中添加标签
   1. 使用正则表达式`^(\([0-9a-z?]*\)|①|②|③|④|⑤)(.*)$`查找
   2. 替换为`<div class="footnote-line"><a class="b-footnote" name="b-footnote-$1" href="#a-footnote-$1">$1</a>$2<a href="#a-footnote-$1" title="回到文档" class="reversefootnote" >↩</a></div>`

9. 标题添加 id

   1. 使用正则表达式 `<(h\d)>(.*)(</h\d>)`查找

   2. 替换为 `<$1 id="$2">$2$3`

10. 正文添加`<p>`标签

    1. 定位行首`^((?!<).)`
    2. 定位行尾`((?!>).)$`

